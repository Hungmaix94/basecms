# Landing Page Clone Design Document

## 1. Overview

This design document details the technical implementation plan for creating a visually faithful landing page clone of http://polyvac.com.vn/. The solution adheres to the project's foundational `requirement.md`, leveraging Next.js (App Router), TypeScript, TailwindCSS, and ShadCN UI for the frontend, with content managed via Strapi v4. The landing page will be optimized for performance through Static Site Generation (SSG) and will be fully responsive across various devices.

## 2. Architecture

The project will follow a monorepo structure, as defined in `requirement.md`, with two primary applications:

*   **`apps/next`**: A Next.js 14 application utilizing the App Router.
    *   Server Components will handle data fetching from Strapi and static content rendering (SSG).
    *   Client Components will be used for interactive elements such as carousels, language switchers, and search functionality.
    *   Styling will be managed with TailwindCSS, with UI components built using ShadCN UI.
*   **`apps/strapi`**: A Strapi v4 headless CMS application backed by PostgreSQL.
    *   This will serve as the single source of truth for all dynamic content displayed on the landing page.
    *   Custom content types will be defined to manage sections like Hero Slides, About Us, Products, Services, News, and Partners.
    *   API endpoints generated by Strapi will be consumed by the Next.js frontend.

Data flow will primarily be unidirectional from Strapi to Next.js. Next.js will fetch data at build time for SSG pages and, where appropriate, use client-side fetching (e.g., with React Query) for interactive or frequently changing content not critical for initial load.

## 3. Components and Interfaces

The Next.js application will be composed of modular, reusable React components. ShadCN UI components will be utilized for consistent styling and accessibility.

### 3.1. Core Layout Components

*   **`app/layout.tsx`**: Defines the root HTML structure, includes global styles, and sets up metadata.
*   **`app/page.tsx`**: The main landing page component, orchestrating the display of all sections.

### 3.2. Section-Specific Components

*   **`Header.tsx`**:
    *   **Description**: Fixed header component containing the logo, main navigation, language switcher, and search icon.
    *   **Dependencies**: `Logo.tsx`, `NavMenu.tsx`, `LanguageSwitcher.tsx`, `SearchIcon.tsx` (using ShadCN UI `Button` for icon).
    *   **Props**: `logoSrc: string`, `navItems: { label: string; href: string; }[]`, `currentLang: 'vn' | 'en'`.
*   **`HeroCarousel.tsx`**:
    *   **Description**: Displays rotating hero banners with dynamic content.
    *   **Dependencies**: `HeroSlide.tsx`, a carousel library (e.g., `embla-carousel-react` integrated with ShadCN UI).
    *   **Props**: `slides: HeroSlideProps[]`.
*   **`HeroSlide.tsx`**:
    *   **Description**: Renders an individual hero slide with background image, title, subtitle, and CTA button.
    *   **Props**: `image: string`, `title: string`, `subtitle: string`, `ctaText: string`, `ctaLink: string`.
*   **`AboutUsSection.tsx`**:
    *   **Description**: Section displaying company introduction with image and "Read More" button.
    *   **Props**: `title: string`, `imageSrc: string`, `content: string`, `ctaText: string`, `ctaLink: string`.
*   **`ProductCarousel.tsx`**:
    *   **Description**: Displays a horizontal carousel of product cards.
    *   **Dependencies**: `ProductCard.tsx`, carousel library.
    *   **Props**: `products: ProductCardProps[]`.
*   **`ProductCard.tsx`**:
    *   **Description**: Represents a single product with image and name.
    *   **Props**: `imageSrc: string`, `name: string`, `link?: string`.
*   **`ServicesGrid.tsx`**:
    *   **Description**: Grid display for company services.
    *   **Dependencies**: `ServiceCard.tsx`.
    *   **Props**: `services: ServiceCardProps[]`.
*   **`ServiceCard.tsx`**:
    *   **Description**: Displays a service with an icon, title, and description.
    *   **Props**: `icon: React.ReactNode | string`, `title: string`, `description: string`.
*   **`NewsGrid.tsx`**:
    *   **Description**: Displays a grid of recent news articles.
    *   **Dependencies**: `NewsCard.tsx`.
    *   **Props**: `newsItems: NewsCardProps[]`.
*   **`NewsCard.tsx`**:
    *   **Description**: Displays a news article summary with image, title, excerpt, and link.
    *   **Props**: `imageSrc: string`, `title: string`, `excerpt: string`, `link: string`.
*   **`PartnersCarousel.tsx`**:
    *   **Description**: Displays a carousel of partner logos.
    *   **Dependencies**: `PartnerLogo.tsx`, carousel library.
    *   **Props**: `partnerLogos: PartnerLogoProps[]`.
*   **`PartnerLogo.tsx`**:
    *   **Description**: Displays an individual partner logo, potentially with a link.
    *   **Props**: `logoSrc: string`, `link?: string`.
*   **`Footer.tsx`**:
    *   **Description**: Contains contact information, navigational links, social media, and copyright.
    *   **Dependencies**: `ContactInfo.tsx`, `FooterNav.tsx`, `SocialMediaEmbed.tsx`, `Copyright.tsx`.
    *   **Props**: `contactInfo: string`, `footerNavSections: { title: string; items: { label: string; href: string; }[] }[]`, `copyrightText: string`, `socialMediaEmbedHtml: string`.

## 4. Data Models (Strapi)

The following custom content types will be created in Strapi to manage the landing page content. These models are designed to be flexible and align with the `requirement.md` where applicable (e.g., `post` content type).

```mermaid
erDiagram
    Page ||--o{ NavItem : has
    LandingPageSettings ||--o{ HeroSlide : includes
    LandingPageSettings ||--|{ AboutUsSection : has
    LandingPageSettings ||--o{ Product : features
    LandingPageSettings ||--o{ Service : offers
    LandingPageSettings ||--o{ NewsArticle : highlights
    LandingPageSettings ||--o{ Partner : partners_with

    LandingPageSettings {
        id UUID PK
        header_logo MEDIA
        footer_contact_info RICHTEXT
        footer_copyright STRING
        language_options JSON
    }

    NavItem {
        id UUID PK
        title STRING
        path URL
        order INTEGER
        location ENUM ("header", "footer-about", "footer-support")
    }

    HeroSlide {
        id UUID PK
        title STRING
        subtitle STRING
        background_image MEDIA
        cta_text STRING
        cta_link URL
        order INTEGER
    }

    AboutUsSection {
        id UUID PK
        title STRING
        image MEDIA
        content RICHTEXT
        cta_text STRING
        cta_link URL
    }

    Product {
        id UUID PK
        name STRING
        image MEDIA
        link URL
        order INTEGER
    }

    Service {
        id UUID PK
        title STRING
        icon MEDIA_OR_STRING
        description TEXT
        order INTEGER
    }

    NewsArticle {
        id UUID PK
        title STRING
        slug UID
        excerpt TEXT
        content RICHTEXT
        cover_image MEDIA
        publishedAt DATETIME
        tags RELATION_MANY
        author RELATION_ONE
        featured BOOLEAN
    }

    Partner {
        id UUID PK
        name STRING
        logo MEDIA
        link URL
        order INTEGER
    }
```

*   **`LandingPageSettings` (Single Type)**: Global configurations for the landing page.
    *   `header_logo`: Media (single image)
    *   `footer_contact_info`: Rich Text
    *   `footer_copyright`: Text
    *   `language_options`: JSON (e.g., `[{ "code": "vn", "label": "Tiếng Việt" }, { "code": "en", "label": "English" }]`)
*   **`NavItem` (Collection Type)**: For dynamic navigation links in header and footer.
    *   `title`: Text
    *   `path`: URL
    *   `order`: Number
    *   `location`: Enumeration (e.g., `header`, `footer-about`, `footer-support`)
*   **`HeroSlide` (Collection Type)**: Represents individual slides in the hero carousel.
    *   `title`: Text
    *   `subtitle`: Text
    *   `background_image`: Media (single image)
    *   `cta_text`: Text
    *   `cta_link`: URL
    *   `order`: Number (to control slide sequence)
*   **`AboutUsSection` (Single Type)**: Content for the "About Us" section on the landing page.
    *   `title`: Text
    *   `image`: Media (single image)
    *   `content`: Rich Text
    *   `cta_text`: Text
    *   `cta_link`: URL
*   **`Product` (Collection Type)**: Items displayed in the products carousel.
    *   `name`: Text
    *   `image`: Media (single image)
    *   `link`: URL (optional, to a dedicated product page if implemented later)
    *   `order`: Number
*   **`Service` (Collection Type)**: Items displayed in the services grid.
    *   `title`: Text
    *   `icon`: Media (for image icons) or Text (for font icon classes)
    *   `description`: Text (short)
    *   `order`: Number
*   **`NewsArticle` (Collection Type - maps to `post` in `requirement.md`)**: Reuses the `post` content type for news.
    *   Only `title`, `excerpt`, `cover_image`, `publishedAt` will be displayed on the landing page.
*   **`Partner` (Collection Type)**: Logos and links for the partners section.
    *   `name`: Text
    *   `logo`: Media (single image)
    *   `link`: URL (optional)
    *   `order`: Number

## 5. Error Handling

### 5.1. Data Fetching

*   **Server Components**:
    *   API calls to Strapi will be wrapped in `try-catch` blocks within Next.js server components (e.g., `app/page.tsx`).
    *   In case of fetching errors, a generic fallback UI (e.g., "Content unavailable, please try again later") will be displayed for the affected section, or a default empty state.
*   **Client Components (if any client-side fetching)**:
    *   `react-query` will be used for client-side data fetching, providing built-in mechanisms for `isLoading`, `isError`, and `error` states.
    *   Loading skeletons or error messages will be displayed based on these states.

### 5.2. Image Loading

*   Next.js `Image` component will be configured with a placeholder image for `onError` events to gracefully handle broken image URLs from Strapi.

### 5.3. UI Errors (Client-side)

*   React Error Boundaries will be implemented for critical client-side component trees to prevent a single component crash from bringing down the entire application.

## 6. Testing Strategy

*   **Unit Tests**:
    *   **Framework**: Jest and React Testing Library.
    *   **Scope**: Individual React components (e.g., `Header.tsx`, `HeroSlide.tsx`, `ProductCard.tsx`), utility functions, and custom hooks (if any).
    *   **Focus**: Component rendering, prop handling, basic user interactions, and utility logic.
*   **Integration Tests**:
    *   **Framework**: Jest and React Testing Library.
    *   **Scope**: Combinations of components forming a section (e.g., `HeroCarousel` with `HeroSlide`s), data fetching integration with mocked Strapi responses.
    *   **Focus**: Interaction between components, correct data flow and rendering based on fetched data.
*   **End-to-End (E2E) Tests**:
    *   **Framework**: Playwright.
    *   **Scope**: Full page rendering, responsiveness across different viewport sizes, navigation, form submissions (if any), and overall user experience.
    *   **Focus**: Verifying the application behaves as expected in a browser environment, visual regression testing where applicable.
*   **Accessibility Tests**:
    *   Automated checks using `jest-axe` within unit/integration tests.
    *   Manual checks during E2E testing to ensure keyboard navigation, ARIA attributes, and semantic HTML are correctly implemented.
*   **Performance Testing**:
    *   Monitor Core Web Vitals using Lighthouse (automated in CI/CD if possible, manual during development).
    *   Ensure SSG is correctly configured and data fetching is optimized.
